---
import "graphiql/graphiql.min.css"
import "@graphiql/plugin-explorer/dist/style.css"

interface Props {}
---

<article id="graphiql">...</article>

<script>
  import ReactDOM from 'react-dom/client'
  import { graphiqlElement } from './setup.ts'

  const graphqlElement = document.querySelector('article#graphiql')
  if (!graphqlElement) throw new Error('GraphQL element not found')

  const query = new URLSearchParams(window.location.search).get('query')
  if (query) localStorage.setItem('graphiql:query', query)

  const root = ReactDOM.createRoot(graphqlElement)
  root.render(graphiqlElement)
</script>

<script>
  const footerElement = document.querySelector('footer.sl-flex')
  footerElement?.remove()
  const asideElement = document.querySelector('aside.right-sidebar-container')
  asideElement?.remove()
</script>

<style lang="postcss" is:global>
</style>
