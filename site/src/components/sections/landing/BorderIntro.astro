---
import MatrixCover from "../../MatrixCover.astro"
import ContainedSection from "../../ContainedSection.astro"
---

<ContainedSection>
  <div class="relative">

    <!--SCREW -->
    <div class="screw bg-white rounded-full w-6 h-6 absolute top-0 right-0 z-20 flex items-center justify-center">
      <div class="absolute w-7 h-1 bg-black rotate-45"></div>
    </div>

    <!--CLIPPED CONTAINER-->
    <div class="clipped-container flex overflow-hidden relative h-full" id="glowContainer">
      <div class="glow -z-10"></div>
      <div class="content bg-black h-full">
        <MatrixCover/>
      </div>
    </div>

    <!--SCREW -->
    <div id="screw"
         class="screw bg-white rounded-full w-6 h-6 absolute bottom-0 left-0 z-20 flex items-center justify-center transition-colors duration-200">
      <div class="absolute w-7 h-1 bg-black rotate-45"></div>
    </div>


  </div>
</ContainedSection>

<style>
    .clipped-container {
        position: relative;
        width: 100%;
        padding: 2px;
        background-color: #fff;
        clip-path: polygon(
                0 0,
                calc(100% - 75px) 0,
                100% 75px,
                100% 100%,
                75px 100%,
                0 calc(100% - 75px)
        );
        overflow: hidden;
    }

    .content {
        width: 100%;
        background-color: transparent;
        clip-path: polygon(
                2px 2px,
                calc(100% - 75px) 2px,
                calc(100% - 2px) 75px,
                calc(100% - 2px) calc(100% - 2px),
                75px calc(100% - 2px),
                2px calc(100% - 75px)
        );
        position: relative;
        z-index: 1;
    }

    .glow {
        position: absolute;
        width: 1000px;
        height: 1000px;
        background: radial-gradient(circle, rgb(95, 223, 252) 0%, rgba(255, 255, 255, 0) 70%);
        border-radius: 50%;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: 2;
    }
</style>

<script>
  const container = document.getElementById('glowContainer');
  const glow = container.querySelector('.glow');
  let isMouseOver = false;

  container.addEventListener('mousemove', (e) => {
    isMouseOver = true;
    updateGlowPosition(e);
  });

  container.addEventListener('mouseleave', () => {
    isMouseOver = false;
    glow.style.opacity = '0';
  });

  function updateGlowPosition(e) {
    const rect = container.getBoundingClientRect();
    const x = e.clientX - rect.left - 500; // 75 is half the width of the glow
    const y = e.clientY - rect.top - 500; // 75 is half the height of the glow

    glow.style.left = `${x}px`;
    glow.style.top = `${y}px`;
    glow.style.opacity = '1';

    // Check proximity to edges
    const proximity = 50; // Adjust this value to change how close to the edge the effect starts
    const isNearEdge = x < proximity || y < proximity ||
      x > rect.width - proximity || y > rect.height - proximity;

  }
</script>