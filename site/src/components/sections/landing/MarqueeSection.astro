---
import H1 from "../../typography/h1.astro";

import '../../../styles/marquee.css'

const { title, imageFolder, reverse } = Astro.props

const words = title.split(' ');
const lastWord = words.pop();
const restOfTitle = words.join(' ');

let images;

if (imageFolder === 'pods') {
  images = await Astro.glob('/src/assets/images/marquee/pods/*.{jpeg,jpg,png,gif}');
} else if (imageFolder === 'partners') {
  images = await Astro.glob('/src/assets/images/marquee/partners/*.{jpeg,jpg,png,gif}');
}

const imageUrls = images.map(image => image.default.src);
---

<div class="flex flex-col w-full items-center">
  <div class="w-full max-w-[1440px] px-6 overflow-hidden">
      <div class="text-center">
          <H1>
              {restOfTitle}
              {restOfTitle && ' '}
              <span class="text-accent-500">{lastWord}</span>
          </H1>
      </div>
      <article class="wrapper pb-12 md:pb-24 lg:pb-48">
          <div class:list={[
              'marquee',
              { 'marquee--reverse': reverse }
          ]}>
              <div class="marquee__group">
                {
                  imageUrls.map(url => (
                          <img src={url} alt="logo"></img>
                  ))
                }
              </div>

              <div aria-hidden="true" class="marquee__group">
                {
                  imageUrls.map(url => (
                          <img src={url} alt="logo"></img>
                  ))
                }
              </div>
          </div>
      </article>
  </div>
</div
